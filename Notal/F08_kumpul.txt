function batchkumpul(data_user : array of array of string, NMax_user : integer, data_bahan : array of array of string, NMax_bahan : integer) -> data_bahan : array of array of string
{ INPUT  : database bahan dan user
  OUTPUT : database bahan yang telah dimodifikasi }

KAMUS LOKAL
    pasir_old   : integereger
    batu_old    : integer
    air_old     : integer
    count       : integer
    pasir_new   : integer
    batu_new    : integer
    air_new     : integer

ALGORITMA
    pasir_old   <- 0
    batu_old    <- 0
    air_old     <- 0

    { Update pasir, cari lokasi pasir }
    i transversal [1 ... NMax_bahan ]
        if (data_bahan[i][0] = "pasir") then
            pasir_old   ← integer(data_bahan[i][2])

        if (data_bahan[i][0] = "batu") then
            batu_old    ← integer(data_bahan[i][2])
    
        if (data_bahan[i][0] = "air") then
            air_old     ← integer(data_bahan[i][2])
    
    { Proses Kumpul Batch }
    count ← 0
    i transversal [1, NMax_user]
        if data_user[i][2] = "jin_pengumpul" then {Ditemukan jin pengumpul}
            data_bahan ← F07_Pengumpul.kumpul(data_bahan, NMax_bahan, False)
            count ← count + 1
    
    { Ambil data bahan akhir }
    pasir_new ← 0
    batu_new ← 0
    air_new ← 0

    i transversal [1 ... NMax_bahan ]
        if (data_bahan[i][0] = "pasir") then
            pasir_new   ← integer(data_bahan[i][2])

        if (data_bahan[i][0] = "batu") then
            batu_new    ← integer(data_bahan[i][2])

        if (data_bahan[i][0] = "air") then
            air_new     ← integer(data_bahan[i][2])
    
    { Printeger Hasil }
    output ("Mengerahkan", count, "jin untuk mengumpulkan bahan.")
    output ("Jin menemukan total", pasir_new - pasir_old, "pasir,", batu_new - batu_old, "batu, dan", air_new - air_old, "air.")

    -> data_bahan